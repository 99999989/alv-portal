<!-- a11y -->
<h1 class="sr-only">Navigation</h1>

<!-- Menu Backdrop -->
<div class="modal-backdrop"
     *ngIf="mobileMenuExpanded"
     (click)="toggleMobileSideNav()">
</div>

<!-- Desktop Menu -->
<div class="desktop-menu d-none d-lg-flex flex-column h-100 d-print-none"
     [class.collapsed]="mainNavigationCollapsed">
  <div class="nav-spacer">
  </div>
  <button class="nav-item menu-toggle"
          (click)="toggleDesktopSideNav()">
    <fa-icon *ngIf="!mainNavigationCollapsed"
             class="ml-2"
             [icon]="['fas', 'caret-left']"></fa-icon>
    <fa-icon *ngIf="mainNavigationCollapsed"
             class="ml-2"
             [icon]="['fas', 'caret-right']"></fa-icon>
  </button>
  <!-- Menu Entries -->
  <ng-container *ngFor="let menuEntry of menuEntries$ | async">
    <alv-menu-entry [menuEntry]="menuEntry"
                    [showTooltip]="mainNavigationCollapsed">
    </alv-menu-entry>
  </ng-container>

  <a class="nav-item"
     target="_blank"
     rel="noopener"
     [ngbTooltip]="mainNavigationCollapsed ? cmsTooltipContent: ''"
     placement="right"
     [href]="'home.title.portal-url' | translate">
    <img src="assets/img/logo_arbeit_swiss_without_text.svg"
         class="d-inline-block logo-arbeit-swiss"
         aria-hidden="true">
    <span class="nav-text"
          [innerHTML]="'home.title.cms' | translate"></span>
  </a>

  <ng-template #cmsTooltipContent>
    <div [innerHTML]="'home.title.cms' | translate"></div>
  </ng-template>

  <div class="nav-fill-item flex-grow-1">
  </div>

</div>

<!-- Mobile Menu -->
<div class="mobile-menu d-block d-lg-none d-print-none animate"
     [class.open]="mobileMenuExpanded">

  <div
    class="nav-item not-hoverable"
    *alvIsAuthenticated>
    <alv-user-name-and-company
      *ngIf="currentUser"
      [displayName]="currentUser.displayName"
      [companyName]="(currentCompany$|async)?.companyName">
    </alv-user-name-and-company>
  </div>
  <div *alvHasAnyAuthority="[userRole.ROLE_PAV, userRole.ROLE_COMPANY]"
       class="nav-item not-hoverable">
    <alv-accountability-switcher class="w-100"></alv-accountability-switcher>
  </div>

  <div class="mb-3"></div>

  <!--Login Button-->
  <a class="d-flex align-self-center btn btn-primary m-3 w-80"
     *alvIsAnonymous
     (click)="login()">
    <fa-icon class="nav-icon mx-2"
             [icon]="['fas', 'key']"></fa-icon>
    <span class="nav-text">{{'global.menu.account.login' | translate}}</span>
  </a>

  <!-- Menu Entries -->
  <ng-container *ngFor="let menuEntry of menuEntries$ | async">
    <alv-menu-entry [menuEntry]="menuEntry"
                    (itemClicked)="toggleMobileSideNav()">
    </alv-menu-entry>
  </ng-container>
  <hr>
  <a class="nav-item"
     target="_blank"
     rel="noopener"
     [href]="'home.title.portal-url' | translate">
    <img src="assets/img/logo_arbeit_swiss_without_text.svg"
         class="d-inline-block logo-arbeit-swiss"
         aria-hidden="true">
    <span class="nav-text"
          [innerHTML]="'home.title.cms' | translate"></span>
  </a>
  <hr>
  <!--Logout Button-->
  <a class="nav-item"
     *alvIsAuthenticated
     (click)="logout()">
    <fa-icon class="nav-icon"
             [fixedWidth]="true"
             [icon]="['fas', 'power-off']"></fa-icon>
    <span class="nav-text">{{'global.menu.account.logout' | translate}}</span>
  </a>

  <div class="nav-fill-item flex-grow-1">
  </div>
</div>
