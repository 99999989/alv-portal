<button class="proof-of-work-efforts w-100 d-flex align-items-stretch text-left position-relative p-0 row no-gutters"
        (click)="expanded = !expanded"
        [ngClass]="expanded ? 'expanded' : 'collapsed'">
  <span class="col-12 col-lg-3 name-cell">
    <small class="d-block text-truncate">
      {{'portal.work-efforts.proof-of-work-efforts.name-cell.title' | translate}}
    </small>
    <h3 class="period-title mb-0 mt-1 my-lg-1">
      <fa-icon [icon]="['fas', expanded ? 'caret-up' : 'caret-down']"
               class="mr-1"></fa-icon>
      <small *ngIf="proofOfWorkEffortsModel.isBeforeEmployment; else date">
        {{'portal.work-efforts.proof-of-work-efforts.name-cell.before-unemployment.label' | translate}}
      </small>
      <ng-template #date>{{'portal.work-efforts.month.' + proofOfWorkEffortsModel.monthValue | translate}}
        {{proofOfWorkEffortsModel.controlPeriodDateString | date:'yyyy'}}</ng-template>
    </h3>
  </span>
  <span class="col-12 col-lg-3 pdf-cell">
    <button *ngIf="proofOfWorkEffortsModel.hasPdfDocument"
            class="pdf-link p-0"
       (click)="$event.stopPropagation();downloadPdf(proofOfWorkEffortsModel.id)">
    <fa-icon [icon]="['far', 'file-pdf']"
             class="text-primary mr-1"></fa-icon>
      {{'portal.work-efforts.proof-of-work-efforts.pdf-file.name' | translate}}{{proofOfWorkEffortsModel.controlPeriodDateString}}.pdf</button>
  </span>
  <span class="col-12 col-lg-3 status-cell d-flex flex-column">
    <small class="status-label">
      {{'portal.work-efforts.edit-status.label' | translate}}
    </small>
    <div class="flex-grow-1">
      {{'portal.work-efforts.proof-of-work-efforts.edit-status.text' | translate}}:
      {{proofOfWorkEffortsModel.workEfforts.length}}
    </div>
  </span>
  <span class="col-12 col-lg-3 status-cell d-flex flex-column"
        [class.success]="proofOfWorkEffortsModel.isSentSuccessfully">
    <small class="status-label">
      {{'portal.work-efforts.submit-status.label' | translate}}
    </small>
    <div class="flex-grow-1">
          {{ proofOfWorkEffortsModel.statusLabel | translate:{dateTime: proofOfWorkEffortsModel.submissionDate | date: 'dd.MM.yyyy HH:mm'} }}
    </div>
    <div class="success-icon-container text-center h-100 align-items-center">
      <fa-icon [icon]="['fas', 'check']"
               class="w-100"></fa-icon>
    </div>
  </span>
  <span class="expanded-indicator h-100">
  </span>
</button>

<!-- Collapse Panel -->
<ng-container *ngIf="expanded">
  <div class="arrow-container">
    <div class="arrow-down">
    </div>
  </div>

  <div class="collapse-panel">
    <a *ngIf="!proofOfWorkEffortsModel.isClosed"
       [routerLink]="'/work-efforts/create'"
       class="btn btn-text add-work-effort-button w-100">
      <fa-icon [icon]="['fas', 'plus']"
               class="mr-1"></fa-icon>
      {{'portal.work-efforts.proof-of-work-efforts.add-work-effort.button.label' | translate}}
    </a>

    <ng-container *ngFor="let workEffort of proofOfWorkEffortsModel.workEfforts; let last = last">
      <div class="work-effort-divider"></div>

      <alv-work-effort (deleted)="removeWorkEffort($event)"
                       [workEffortModel]="workEffort">
      </alv-work-effort>

      <div *ngIf="last"
           class="work-effort-divider"></div>
    </ng-container>

  </div>
</ng-container>

